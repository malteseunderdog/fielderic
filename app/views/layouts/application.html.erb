<!doctype html>
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en" class="no-js"> <!--<![endif]-->

<!-- 
    Important note on the following code.  
    
    This page was initially generated by http://html5boilerplate.com/.  This means that there
    are lots of strange looking quirks to for cross browser/platform support.
    
    JP (2011-06-17) 
-->
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Field Eric: Plan Some | Play Some</title>
    <meta name="description" content="social sports, find player, organise match, field eric cantona">
    <meta name="author" content="Jean-Paul Ebejer, David Camilleri, Michael Camilleri">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="shortcut icon" href="./img/favicon.ico">
    <link rel="apple-touch-icon" href="./img/football.png">
    <%= stylesheet_link_tag "style" %>

    <link href='http://fonts.googleapis.com/css?family=Play:regular,bold&v1' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Rokkitt&v1' rel='stylesheet' type='text/css'>

	<script type="text/javascript" src="/javascripts/libs/modernizr-1.7.min.js"></script>
    <script type="text/javascript" src="/javascripts/libs/hint-textbox.js"></script>
	<script type="text/javascript" src="/javascripts/libs/jquery-1.7.1.min.js"></script>
	<script type="text/javascript" src="/javascripts/libs/jquery.validate.min.js"></script>
	<script type="text/javascript" src="/javascripts/application.js"></script>
</head>
<body>
    <div id="container">
        <header>
            <div>
	            <h1><a href="/">Field Eric</a></h1>
	            <h2>Plan some | Play some</h2>
	            <%= image_tag "eric.png", {:alt => "King Eric"} %>
            </div>
            <div style="font-family: arial, serif; color: #fff;">
            	<table width="100px" height="48px">
            		<tr><td></td></tr>
            	</table>
            	    <% if session[:player].nil? %>
						
						<% if @player.nil? %>
						  <% form_tag :action => :index do %>
						  	<%= text_field_tag :nickname, 'Nickname', :class => 'hintTextbox' %>
						  	<%= submit_tag 'Sign in' %>
						  <% end %>
						  <br/>
						  <span id="auth">
						  	New user? 
 						  	<%= link_to "Sign up", new_player_path %>
 						  </span>
						  				    
						<% elsif @player == "Nickname error" %>
						  <% form_tag :action => :index do %>
						  	<%= text_field_tag :nickname, 'Nickname', :class => 'hintTextbox' %>
						  	<%= submit_tag 'Sign in' %>
						  	<br/>		
						  	<span id="auth">						  
						  	  <%= "No such user" %>	
						  	  <br/>		  	
							  <% end %>
							  New user?
							  <%= link_to "Sign up", new_player_path %>
						  </span>
						
						<% elsif @player.instance_of?(String) %>
						  <% form_tag :action => :index do %>
						  	<%= text_field_tag :nickname, @player %><br>
						  	<div id="temp_pass"><input name="pass_temp" id="pass_temp" class="hints" type="text" value="Password" size="20" maxlength="20" onfocus="changeBox()" />&nbsp;<%= submit_tag 'Sign in' %></div>
                            <div id="pass" style="display:none"><input name="password" id="password" type="password" value="" size="20" maxlength="20" onBlur="restoreBox()" />&nbsp;<%= submit_tag 'Sign in' %></div>
							<span id="auth">
						  		<%= "Wrong nickname and password combination" %><br/>
							  	<% end %>
							  	New user?
							  	<%= link_to "Sign up", new_player_path %>
						  	</span>
						
						<% elsif session[:player].nil? and @player.nickname.nil? %>
						  <% form_tag :action => :index do %>
						  	<%= text_field_tag :nickname, 'Nickname', :class => 'hintTextbox' %>
						  	<%= submit_tag 'Sign in' %>
						  <% end %>
						  <br/>
						  <span id="auth">
							New user?
						    <%= link_to "Sign up", new_player_path %>
						  </span>
						  
						<% elsif @player.password != "" and not @player.password.nil? and params[:password].nil? %>					
						  <% form_tag :action => :index do %>
						  	<%= text_field_tag :nickname, @player.nickname %><br>
						  	<div id="temp_pass"><input name="pass_temp" id="pass_temp" class="hints" type="text" value="Password" size="20" maxlength="20" onfocus="changeBox()" />&nbsp;<%= submit_tag 'Sign in' %></div>
                            <div id="pass" style="display:none"><input name="password" id="password" type="password" value="" size="20" maxlength="20" onBlur="restoreBox()" />&nbsp;<%= submit_tag 'Sign in' %></div>				  							  	
						  <% end %>
						  <br/>
						  <span id="auth">
  						    New user?
						    <%= link_to "Sign up", new_player_path %>
						  </span>
						<% else %>
						  <% session[:player] = @player %>
						  <span id="auth">
							  <%= link_to session[:player].nickname, session[:player] %> | 
							  <%= link_to "Sign out", :controller => "home", :action => "sign_out" %>
						  </span>					  
						<% end %>
					<% else %>		
						<span id="auth">						
						  <%= link_to session[:player].nickname, session[:player] %> | 
						  <%= link_to "Sign out", :controller => "home", :action => "sign_out" %>
					    </span> 
					<% end %>
            </div>
        </header>
        <div id="main" role="main">
            <%= yield %>
        </div>

        <footer>
            
        </footer>
    </div>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
    <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery-1.7.1.min.js"%3E%3C/script%3E'))</script>
    <script src="js/plugins.js"></script>
    <script src="js/script.js"></script>
    <!--[if lt IE 7 ]>
    <script src="js/libs/dd_belatedpng.js"></script>
    <script> DD_belatedPNG.fix('img, .png_bg');</script>
    <![endif]-->
    
    
	<script type="text/javascript" charset="utf-8">
	  var is_ssl = ("https:" == document.location.protocol);
	  var asset_host = is_ssl ? "https://s3.amazonaws.com/getsatisfaction.com/" : "http://s3.amazonaws.com/getsatisfaction.com/";
	  document.write(unescape("%3Cscript src='" + asset_host + "javascripts/feedback-v2.js' type='text/javascript'%3E%3C/script%3E"));
	</script>
	
	<script type="text/javascript" charset="utf-8">
	  var feedback_widget_options = {};
	  feedback_widget_options.display = "overlay";  
	  feedback_widget_options.company = "fielderic";
	  feedback_widget_options.placement = "right";
	  feedback_widget_options.color = "#169100";
	  feedback_widget_options.style = "question";
	  var feedback_widget = new GSFN.feedback_widget(feedback_widget_options);
	</script>
</body>
</html>